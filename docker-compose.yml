version: "2"
services:
  dockerico:
    build: ./dockeri.co
    container_name: dockerico
    networks:
      - wblankenship
    restart: always
  ssb:
    build: ./easy-ssb-pub
    container_name: ssb
    environment:
      HOST: "ssb.dockeri.co"
    networks:
      - wblankenship
    volumes:
      - ./.ssb:/root/.ssb
    restart: always
  nextcloud:
    image: nextcloud
    container_name: nextcloud
    networks:
      - wblankenship
    restart: always
    volumes:
      - ./nextcloud/data:/var/www/html
  nginx:
    image: nginx
    container_name: nginx
    networks:
      - wblankenship
    restart: always
    volumes:
      - ./nginx/dockerico.conf:/etc/nginx/conf.d/dockerico.conf:ro
      - ./nginx/ssb.conf:/etc/nginx/conf.d/ssb.conf:ro
      - ./nginx/nextcloud.conf:/etc/nginx/conf.d/nextcloud.conf:ro
      - ./logs:/var/log/nginx
    volumes_from:
      - dockerico
      - nextcloud
      - ssb
    ports:
      - 80:80
      - 8008:8008
      - 8007:8007
networks:
  wblankenship:
    driver: bridge
